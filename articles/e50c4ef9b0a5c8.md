---
title: "Ubuntuã«PipeWireã‚’å…¥ã‚Œã¦ã¿ã‚‹"
emoji: "ğŸ”Š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [ubuntu,pulseaudio,pipewire]
published: true
---
:::message
Ubuntu22.10ä»¥é™ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯PipeWireãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã™ã€‚
:::
# ã¾ãšPipeWireã£ã¦ä½•ï¼Ÿ
[Pipewire](https://pipewire.org/)ã¯RedHatã®ä¸­ã®äººã«ã‚ˆã£ã¦é–‹ç™ºã•ã‚ŒãŸæ–°ã—ã„ãƒãƒ«ãƒãƒ¡ãƒ‡ã‚£ã‚¢ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚
æ˜ åƒã¨éŸ³å£°ã‚’ä½ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãƒ¼ã§å†ç”Ÿ/éŒ²ç”»ã€éŒ²éŸ³ã™ã‚‹ã“ã¨ã‚’ç›®æ¨™ã«é–‹ç™ºã•ã‚Œã¦ã„ã¦ã€PulseAudioã‚„JACKãªã©ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨äº’æ›æ€§ãŒã‚ã‚Šã¾ã™ã€‚
ã¾ãŸã€[Flatpak](https://flatpak.org/)ã‚„[Wayland](https://wayland.freedesktop.org/)ã¨ä¸¦ã‚“ã§ã€å°†æ¥ã®Linuxã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®ä¸­æ ¸ã‚’ãªã™å­˜åœ¨ã«ãªã‚‹ã¨æœŸå¾…ã—ã¦ã„ã¾ã™ã€‚(æ—©é€ŸUbuntu 22.10ã§PipeWireãŒæ¡ç”¨ã•ã‚ŒãŸã‚ˆã†ã§ã™)

ä»Šå›ç§ã®å ´åˆã¯Flatpakã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒPireWireã—ã‹ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã‹ã£ãŸã®ã§ã“ã®æ©Ÿä¼šã«Pipewireã‚’å…¥ã‚Œã¦ã¿ã¾ã—ãŸã€‚

:::message
ã“ã®è¨˜äº‹ã®å†…å®¹ã«å¾“ã£ãŸæ“ä½œã¯ã™ã¹ã¦è‡ªå·±è²¬ä»»ã§è¡Œã£ã¦ãã ã•ã„ã€‚
å¾“ã£ãŸã“ã¨ã«ã‚ˆã£ã¦ç”Ÿã˜ã‚‹å¦‚ä½•ãªã‚‹æå®³ã«ã¤ã„ã¦ã‚‚è²¬ä»»ã¯å–ã‚Šã¾ã›ã‚“ã€‚
:::

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã„ã¦ä¸‹ã®æ‰‹é †ã®é€šã‚Šã«ã‚³ãƒãƒ³ãƒ‰ã‚’æ‰“ã£ã¦ã„ãã¾ã™ã€‚

å…¬å¼ã«ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã•ã‚Œã¦ã„ã‚‹PPAã‚’è¿½åŠ ã—ã¾ã™ã€‚
```shell
sudo add-apt-repository ppa:pipewire-debian/pipewire-upstream
```

ã‚·ã‚¹ãƒ†ãƒ ã®PPAãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ›´æ–°ã—ã¾ã™ã€‚
```shell
sudo apt update
```

ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
:::message
`libfdk-aac2`ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ã€`libfdk-aac1`ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„
:::
```shell
sudo apt install libfdk-aac2 libldacbt-{abr,enc}2 libopenaptx0
```

Piprewireã¨è¿½åŠ ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
```shell
sudo apt install gstreamer1.0-pipewire libpipewire-0.3-{0,dev,modules} libspa-0.2-{bluetooth,dev,jack,modules} pipewire{,-{audio-client-libraries,pulse,bin,locales,tests}}
```

:::details WirePlumberã‚’å…¥ã‚Œã‚‹
[WirePlumber](https://gitlab.freedesktop.org/pipewire/wireplumber)ã¯PipeWireç”¨ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¼ã‚»ãƒƒã‚·ãƒ§ãƒ³/ãƒãƒªã‚·ãƒ¼ãƒãƒãƒ¼ã‚¸ãƒ£ã§ã™ã€‚
```shell
sudo apt-get install libpipewire-module-x11-bell
```
:::

:::details Waylandã§ã¯ãªãX11ã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹æ–¹ã¸
X11ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€x11-bellã®æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã«ã€`libpipewire-module-x11-bell`ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚
```shell
sudo apt-get install libpipewire-module-x11-bell
```
:::

PulseAudioã«é–¢ä¿‚ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç„¡åŠ¹åŒ–ã—ã¾ã™ã€‚
```shell
systemctl --user --now disable  pulseaudio.{socket,service}
systemctl --user mask pulseaudio
```

PipeWireé–¢é€£ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’æœ‰åŠ¹åŒ–ã—ã¾ã™ã€‚
```shell
systemctl --user --now enable pipewire{,-pulse}.{socket,service}
```

æœ€å¾Œã«ãƒ‘ã‚½ã‚³ãƒ³ã‚’å†èµ·å‹•ã—ã¦ãã ã•ã„ã€‚
ã“ã‚Œã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯å®Œäº†ã§ã™ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹
ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’é–‹ãã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
```shell
pactl info
```
ã‚µãƒ¼ãƒãƒ¼å(è‹±èªã ã¨`Server Name`)ã« (on Pipewire x.x.x) ã¨ã¤ã„ã¦ã„ãŸã‚‰æˆåŠŸã§ã™ã€‚
![](/images/e50c4ef9b0a5c8/console1.png)

# Pipewireã‚’ç„¡åŠ¹åŒ–ã™ã‚‹
ã¾ã ç§ã¯è©¦ã—ã¦ã„ãªã„ãŸã‚åˆ†ã‹ã‚Šã¾ã›ã‚“ãŒã€å…¬å¼ã‚µã‚¤ãƒˆã«å¾“ã†ã¨æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚
```shell
systemctl --user unmask pulseaudio
systemctl --user --now disable pipewire{,-pulse}.{socket,service}    
systemctl --user --now enable pulseaudio.service pulseaudio.socket
```

# ã‚ã¨ãŒã
ä»Šå›ã¯ã€PipeWireã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’è§£èª¬ã—ã¾ã—ãŸã€‚
ä»Šã®ã¨ã“ã‚å•é¡Œã‚‚èµ·ã“ã‚‰ãšæ™®é€šã«ä½¿ãˆã¦ã„ã¾ã™ã€‚

-----

https://pipewire-debian.github.io/pipewire-debian/#2-install-pipewire-or-blueman-git

https://askubuntu.com/questions/1339765/replacing-pulseaudio-with-pipewire-in-ubuntu-20-04
